module.exports = findall;

function  findall (text, re) {
  var match, matched, result = [];

  if (!re.global) {

    if(match = text.match(re)) {
      match.length > 1 && result.push(match[1]);
      matched = true;
    }

  } else {

    while (match = re.exec(text)) {
      matched = true;
      result.push.apply(result, match.slice(1));
    };

  }

  return !matched || result.length == 0 ? undefined : result;
}
